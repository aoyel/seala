/*! seala.js 2016-03-26 */
function intval(a){var b=parseInt(a);return isNaN(b)?0:b}function floatval(a){var b=parseFloat(a);return isNaN(b)?0:b}function isString(a){return"string"==typeof a}function moneyFormat(a){return a=floatval(a),a.toFixed(2)}function isNumber(a){return"number"==typeof a}function trim(a){return null==a?"":(a+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function empty(a,b){b&&isString(a)&&(a=trim(a));var c,d,e,f,g=[c,null,!1,0,"","0"];for(e=0,f=g.length;f>e;e++)if(a===g[e])return!0;if("object"==typeof a){for(d in a)if(a.hasOwnProperty(d))return!1;return!0}return!1}function isset(a,b){return"object"!=typeof a?!1:a.hasOwnProperty(b)}function isPhone(a){return a&&/^1[3-9]\d{9}$/.test(a)}function isEmail(a){return a&&/^[0-9a-zA-Z_\-]+@[0-9a-zA-Z_\-]+\.\w{1,5}(\.\w{1,5})?$/.test(a)}function isBankCard(a){return a&&/^\d{16,30}$/.test(a)}function isChinaName(a){return a&&trim(a).length>=2&&!/^.*\\d{1,}.*$/.test(a)}function isIdentityNumber(a){if(""==trim(a)||!/^[0-9]{17}[0-9X]$/.test(a))return!1;for(var b=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),c=new Array("1","0","X","9","8","7","6","5","4","3","2"),d=0,e=0;17>e;e++)d+=parseInt(a.charAt(e),10)*b[e];return c[d%11]==a.substr(17)}function isMobile(){var a=navigator.userAgent,b=a.match(/(iPad).*OS\s([\d_]+)/),c=!b&&a.match(/(iPhone\sOS)\s([\d_]+)/),d=a.match(/(Android)\s+([\d.]+)/);return c||d}function randomInt(a,b){return Math.floor(Math.random()*(b-a))+a}function goBack(a){a=a||!1,a?window.location.href=document.referrer:window.history.back()}function numberCheck(a){1==a.value.length?a.value=a.value.replace(/[^1-9]/g,""):a.value=a.value.replace(/[^0-9]/g,"")}function dateFormat(a){return new Date(1e3*parseInt(a)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," ")}function reload(a){"undefined"==typeof a&&(a=2e3),setTimeout(function(){location.reload(!0)},a)}function lazyLoad(a,b){a=empty(a)?"/":a,"undefined"==typeof b&&(b=2e3),setTimeout(function(){window.location.href=a},b)}function uuid(){function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return a()+a()+a()+a()+a()+a()+a()+a()}function notify(a,b,c){var d=uuid(),b=b||"default",e="position: fixed;padding: 1em 2em;z-index: 999;border-radius: 3px;color: #FFF;top: 50%;font-size: 1em;box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);";"default"===b?e+="background: rgba(0, 0, 0, 0.8);":"primary"===b?e+="background: rgba(14, 131, 205, 0.8);":"success"===b?e+="background: rgba(69, 181, 73, 0.8);":"error"===b&&(e+="background: rgba(242, 77, 77, 0.8);");var a="<div id='"+d+"' style='"+e+"'>"+a+"</div>";$("body").append(a);var f=$("#"+d),g=($(window).width()-f.width())/2,h=parseInt(($(window).height()-f.height())/2);f.hide(),f.css({left:g,top:h}).fadeIn(),setTimeout(function(){f.fadeOut("slow",function(){$(this).remove()})},2e3)}String.prototype.format=function(){var a=arguments;return this.replace(/\{(\d+)\}/g,function(b,c){return a[c]})},$(function(){var a=null;if(window.Editor&&(a=new Editor,a.render()),$("#post-button").on("click",function(b){var c=$($(this).attr("target")),d={};return d.title=$("input[name='title']").val(),empty(d.title)?($("input[name='title']").focus(),!1):(d.content=a.codemirror.getValue(),void $.post(c.attr("action"),d,function(a,b,c){1==a.status?(notify("success","success"),lazyLoad("/")):notify(a.data,"error")},"json"))}),$("#comment-button").on("click",function(a){var b=$($(this).attr("target")),c=b.formToArray(),d={};for(i in c)d[c[i].name]=c[i].value;$.post(b.attr("action"),d,function(a,b,c){1==a.status?(notify("success","success"),reload()):notify(a.data,"error")},"json")}),$(".comment-list").length>0){var b=$(".comment-list").data("id");$.get("/comment/{0}".format(b),function(a){if(1==a.status){var b=a.data;$.each(b,function(a,b){console.log(b),$(".comment-list").append('		<div class="comment">			<strong class="author">'+b.name+"<time>"+new Date(1e3*b.create_time)+"</time></strong>			<p>"+marked(b.content)+"</p>		</div>")})}})}});